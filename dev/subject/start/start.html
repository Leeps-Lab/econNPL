{% load verbatim %}
<!DOCTYPE HTML>
<html ng-app="Redwood">
<head>
  <title>Start</title>
  <script type="text/javascript" src="{{ STATIC_URL }}framework/js/lib/jquery/jquery.min.js"></script>
  <script type="text/javascript" src="{{ STATIC_URL }}framework/js/lib/bootstrap/bootstrap-3.1.1.min.js"></script>
  <script type="text/javascript" src="{{ STATIC_URL }}framework/js/lib/angular/angular-1.2.16.js"></script>
  <script type="text/javascript" src="{{ STATIC_URL }}framework/js/redwoodCore.js"></script>
	<script type="text/javascript" src="{{ STATIC_URL }}framework/js/redwoodHelpers.js"></script>
	<script type="text/javascript" src="{{ STATIC_URL }}framework/js/redwoodSubject.js"></script>
	<script type="text/javascript" src="{{ STATIC_URL }}framework/js/synchronizedStopWatch.js"></script>
	<link type="text/css" rel="stylesheet" href="{{ STATIC_URL }}framework/css/bootstrap-3.1.1.min.css"></link>
	<script type="text/javascript">
		var IMAGE_URL = "{{ STATIC_URL }}/img/Discrete Matrix";
		{{ js }}
	</script>
	<style type="text/css">
		{{ css }}
	</style>
</head>
{% verbatim %}
<body style="padding-top:80px;" ng-controller="SubjectCtrl">

<div class="navbar navbar-fixed-top container">
  <div class="navbar navbar-default" style="margin-bottom: 0;">
		<ul class="nav navbar-nav">
			<li class="active">
				<a>User ID: <span>{{$root.user_id}}</span></a>
			</li>
		</ul>
		<div class="navbar-right">
			<div class="navbar-text">Period: <span>{{$root.period}}</span></div>
			<div class="navbar-text">Total Reward: <span>{{$root.totalPoints}}</span></div>
		</div>
	</div>
</div>

<div class="container">

	<key-press key-code="38" callback="onSelection(1)"></key-press>
	<key-press key-code="40" callback="onSelection(2)"></key-press>
	<key-press key-code="13" callback="confirm()"></key-press>

	<div class="row">
		<div class="col-lg-2"></div>
    <div class="row">
      <div class="col-lg-12 text-center">
        <h3 id="decision">Decision</h3>
      </div>
    </div>
		<div class="col-lg-10">
			<div class="row">
				<div class="col-lg-5 col-lg-offset-2">
					<div class="row">
						<div class="col-lg-12">
							<table id="input-matrix" class="table table-bordered table-condensed">
								<tr style="height:40px;">
									<td></td>
									<td ng-class="{'selected': prevPartnerAction == 1}">A</td>
									<td ng-class="{'selected': prevPartnerAction == 2}">B</td>
								</tr>
								<tr style="height:40px;">
									<td class="input-cell" ng-class="{'selected': selection == 1}">
										<span class="disabled" ng-hide="inputsEnabled">A</span>
										<a ng-click="onSelection(1)" ng-show="inputsEnabled" class="input-link" href>A</a>
									</td>
									<td ng-class="{'selected': prevPartnerAction == 1 || selection == 1, 'double-selected': prevPartnerAction == 1 && selection == 1}">
										<strong>{{matrix[0][0][0]}}</strong>, <span>{{matrix[0][0][1]}}</span>
									</td>
									<td ng-class="{'selected': prevPartnerAction == 2 || selection == 1, 'double-selected': prevPartnerAction == 2 && selection == 1}">
										<strong>{{matrix[0][1][0]}}</strong>, <span>{{matrix[0][1][1]}}</span>
									</td>
								</tr>
								<tr style="height:40px;">
									<td class="input-cell" ng-class="{'selected': selection == 2}">
										<span class="disabled" ng-hide="inputsEnabled">B</span>
										<a ng-click="onSelection(2)" ng-show="inputsEnabled" class="input-link" href>B</a>
									</td>
									<td ng-class="{'selected': prevPartnerAction == 1 || selection == 2, 'double-selected': prevPartnerAction == 1 && selection == 2}">
										<strong>{{matrix[1][0][0]}}</strong>, <span>{{matrix[1][0][1]}}</span>
									</td>
									<td ng-class="{'selected': prevPartnerAction == 2 || selection == 2, 'double-selected': prevPartnerAction == 2 && selection == 2}">
										<strong>{{matrix[1][1][0]}}</strong>, <span>{{matrix[1][1][1]}}</span>
									</td>
								</tr>
							</table>
						</div>
					</div>
					<div class="row">
						<div class="col-lg-12">
							<button ng-click="confirm()" ng-disabled="!inputsEnabled" class="btn btn-success">Ready</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
  <br>
  <div class="row">
    <div class="row">
      <div class="col-lg-12 text-center">
        <h3 id="communicate">Communicate {{timeleft >= 0 ? '('+timeleft+')' : ''}}</h3>
      </div>
    </div>
    <div id="wrapper">
      <div id="menu">
        <div style="clear:both"></div>
      </div>

      <div id="chatbox">
        <p ng-repeat="message in messages">
          <strong>{{message.from == user_index ? 'You' : 'Other Person'}}</strong> : {{message.text}}
        </p>
      </div>
      <form ng-show="chatEnabled || play === 'allplay'">
        <input ng-model="message" name="usermsg" type="text" id="usermsg" size="63" />
        <button class="btn btn-default" ng-click="sendMessage()">Send</button>
        <!-- <input name="submitmsg" type="submit" id="submitmsg" value="Send" /> -->
      </form>
    </div>
    <!--
    <div class="row">
      <div class="col-lg-12">
        <div style="border-style:solid;border-width:1px;min-height:100px;min-width:600px;">
          <p ng-repeat="message in messages">
            <strong>{{message.from == user_index ? 'You' : 'Other Person'}}</strong> : {{message.text}}
          </p>
        </div>
      </div>
    </div>
    <br>
    <div class="row" ng-show="chatEnabled || play === 'allplay'">
      <div class="col-lg-12">
        <form class="form-inline">
          <div class="form-group">
            <label for="message" class="control-label sr-only">Message</label>
            <input ng-model="message" id="message" class="form-control" type="text" />
          </div>
          <button class="btn btn-default" ng-click="sendMessage()">Send</button>
        </form>
      </div>
    </div>
    -->
  </div>
	<div class="row">
		<hr style="margin-top:20px;"/>
		<div class="col-lg-12" id="footer">
		</div>
	</div>
</div>

</body>
{% endverbatim %}
</html>
